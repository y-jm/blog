---
title: 实现模版引擎
date: 2021-07-19 23:08
categories:
- javascript 
---
## 1. 简述
实现vue风格的模版引擎

通过`type="template"`声明一个模版元素，用来在页面加载完成后再获取到它对其进行渲染。
``` html
<script type="template" id="template">
</script>
```
## 2.使用一个最简单的模版引擎
使用{{}}在模版元素声明一个变量，通过replace()方法来匹配替换
```html
 <script type="template" id="template">
       <img src="{{src}}" alt="{{alt}}" />
      </script>
  <div id="container"></div>
```

``` javascript
 var template = document.getElementById("template"); //获取模版元素

 //要替换的数据
var obj = {
        src: "http://baidu.com.jpg",
        alt: "照片"
    }

var str = templateEngine(template.innerHTML, obj);
document.getElementById("container").innerHTML = str; //填充替换后的模版数据 

     /**
     * @description: 
     * @param {*} template 模版字符串
     * @param {*} data 需要替换的数据
     * @return {*} 替换数据后的模版
     */
    function templateEngine(template, data) {
        //Object.keys() 返回一个键数组['src','alt']，遍历键值替换
        Object.keys(data).forEach(element => {
            template = template.replace("{{" + element + "}}", data[element]);
        });
        console.log(template); // 打印：<img src="http://baidu.com.jpg" alt="照片" />
        return template;
    }
```

