(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{553:function(s,e,a){"use strict";a.r(e);var t=a(6),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_1-简述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-简述"}},[s._v("#")]),s._v(" 1.简述")]),s._v(" "),a("p",[s._v("使用阿里云CentOS7.4安装openresty")]),s._v(" "),a("h2",{attrs:{id:"_2-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装"}},[s._v("#")]),s._v(" 2.安装")]),s._v(" "),a("h3",{attrs:{id:"_1-使用官方的预编译包进行安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用官方的预编译包进行安装"}},[s._v("#")]),s._v(" 1.使用官方的预编译包进行安装")]),s._v(" "),a("p",[s._v("在CentOS 系统中添加 "),a("code",[s._v("openresty")]),s._v(" 仓库，这样就可以便于未来安装或更新我们的软件包（通过 "),a("code",[s._v("yum check-update")]),s._v(" 命令）。运行下面的命令就可以添加我们的仓库")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager --add-repo https://openresty.org/package/centos/openresty.repo\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("然后输入下面命令安装软件包，比如 "),a("code",[s._v("openresty")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y openresty\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("安装命令行工具 "),a("code",[s._v("resty")]),s._v("，输入下面命令安装 "),a("code",[s._v("openresty-resty")]),s._v(" 包")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y openresty-resty\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果没有出现任何错误，openresty默认安装在 "),a("code",[s._v("usr/local/openresty")]),s._v("，输入下面命令进行启动")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("usr/local/openresty/nginx/sbin/nginx "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##启动")]),s._v("\nusr/local/openresty/nginx/sbin/nginx -s stop "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##关闭")]),s._v("\nusr/local/openresty/nginx/sbin/nginx -s reload "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##重启")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("使用下面命令即可查看是否启动成功，成功则会返回HTML文本")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" localhost:80\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-使用官网源码包进行安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用官网源码包进行安装"}},[s._v("#")]),s._v(" 2.使用官网源码包进行安装")]),s._v(" "),a("p",[s._v("安装前准备，需要把"),a("code",[s._v("perl 5.6.1+")]),s._v(", "),a("code",[s._v("libpcre")]),s._v(", "),a("code",[s._v("libssl")]),s._v("这些库安装好")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pcre-devel openssl-devel gcc "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后使用wget下载源码包")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://openresty.org/download/openresty-1.15.8.1.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("执行下面命令进行解压")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("tar -xzvf openresty-1.15.8.1.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后"),a("code",[s._v("cd openresty-1.15.8.1")]),s._v("进入目录下面执行，程序会被安装到/usr/local/openresty目录")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("./configure\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后出现下面的图片就是成功了")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://picgo-1256471247.cos.ap-chengdu.myqcloud.com/20200225182542.png",alt:""}})]),s._v(" "),a("p",[s._v("然后使用下面命令编译安装完成")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("gmake && gmake install\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后使用"),a("code",[s._v("/usr/local/openresty/nginx/sbin/nginx")]),s._v("启动服务器，还是使用"),a("code",[s._v("curl localhost")]),s._v("看是否启动成功，成功则返回一段HTML文本，如下图")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://picgo-1256471247.cos.ap-chengdu.myqcloud.com/20200225183142.png",alt:""}})]),s._v(" "),a("p",[s._v("到此openresty就全部安装完成，如果想着浏览器访问，则需要开放相对应的端口")]),s._v(" "),a("h2",{attrs:{id:"_3-开发端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-开发端口"}},[s._v("#")]),s._v(" 3.开发端口")]),s._v(" "),a("p",[s._v("使用下面命令开发端口号")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("iptables -I INPUT -p tcp --dport 80 -j ACCEPT # 临时生效\n/etc/init.d/iptables save # 保存到配置文件，永久生效\n/etc/init.d/iptables status # 查看iptables当前状态\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"_4-添加环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-添加环境变量"}},[s._v("#")]),s._v(" 4.添加环境变量")]),s._v(" "),a("h3",{attrs:{id:"_1-方法-一"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-方法-一"}},[s._v("#")]),s._v(" 1.方法（一）")]),s._v(" "),a("p",[s._v("现在每次启动都要输入相对路径，为了方便，把它加入环境变量中,执行"),a("code",[s._v("vim /etc/profile")]),s._v(",把下面添加到文件中，保存退出即可")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("PATH=/usr/local/openresty/nginx/sbin:$PATH\nexport PATH\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("执行"),a("code",[s._v("source /etc/profile")]),s._v(" 重启一下，然后在任何目录下只要输入nginx就可以了，如下图")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://picgo-1256471247.cos.ap-chengdu.myqcloud.com/20200225184852.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"_2-方法-二"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-方法-二"}},[s._v("#")]),s._v(" 2.方法（二）")]),s._v(" "),a("p",[s._v("执行"),a("code",[s._v("vim ~/.bashrc")]),s._v(",把下面一行插入文件中并保存下来,然后使用"),a("code",[s._v("source ~/.bashrc")]),s._v("重启一下")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("export PATH=$PATH:/usr/local/openresty/nginx/sbin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);