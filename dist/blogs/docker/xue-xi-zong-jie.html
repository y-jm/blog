<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>dockerå­¦ä¹ æ€»ç»“ | ğŸŒ</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?da55d9221d1de559e6426dc6f12f5b46";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();

        </script>
    <link rel="icon" href="/dist/favicon.ico">
    <meta name="description" content="">
    <meta lang="zh-CN" name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/dist/assets/css/0.styles.1d7c383d.css" as="style"><link rel="preload" href="/dist/assets/js/app.708579bc.js" as="script"><link rel="preload" href="/dist/assets/js/3.ed567165.js" as="script"><link rel="preload" href="/dist/assets/js/1.c97762f2.js" as="script"><link rel="preload" href="/dist/assets/js/11.e7f32a7d.js" as="script"><link rel="prefetch" href="/dist/assets/js/10.aefcef8b.js"><link rel="prefetch" href="/dist/assets/js/12.7224a74e.js"><link rel="prefetch" href="/dist/assets/js/13.5694cde0.js"><link rel="prefetch" href="/dist/assets/js/14.62475fbd.js"><link rel="prefetch" href="/dist/assets/js/15.079294eb.js"><link rel="prefetch" href="/dist/assets/js/16.5c89d2e4.js"><link rel="prefetch" href="/dist/assets/js/17.e7d4fcc9.js"><link rel="prefetch" href="/dist/assets/js/18.f69d477e.js"><link rel="prefetch" href="/dist/assets/js/19.aa2bee13.js"><link rel="prefetch" href="/dist/assets/js/20.2ab95f82.js"><link rel="prefetch" href="/dist/assets/js/21.537ad7c6.js"><link rel="prefetch" href="/dist/assets/js/22.d6e624ac.js"><link rel="prefetch" href="/dist/assets/js/23.e6368187.js"><link rel="prefetch" href="/dist/assets/js/24.066c0a84.js"><link rel="prefetch" href="/dist/assets/js/25.63aac81e.js"><link rel="prefetch" href="/dist/assets/js/26.022c9742.js"><link rel="prefetch" href="/dist/assets/js/27.9dd9283a.js"><link rel="prefetch" href="/dist/assets/js/28.f4af3574.js"><link rel="prefetch" href="/dist/assets/js/29.e2b16f18.js"><link rel="prefetch" href="/dist/assets/js/30.5ac500b0.js"><link rel="prefetch" href="/dist/assets/js/31.8d5d92df.js"><link rel="prefetch" href="/dist/assets/js/32.f21ce43c.js"><link rel="prefetch" href="/dist/assets/js/33.24e8b2f4.js"><link rel="prefetch" href="/dist/assets/js/34.ae328ea6.js"><link rel="prefetch" href="/dist/assets/js/35.9d70604e.js"><link rel="prefetch" href="/dist/assets/js/36.aa5098eb.js"><link rel="prefetch" href="/dist/assets/js/37.b3f8be39.js"><link rel="prefetch" href="/dist/assets/js/38.3b0e375b.js"><link rel="prefetch" href="/dist/assets/js/39.fccb3ba6.js"><link rel="prefetch" href="/dist/assets/js/4.bdeeb404.js"><link rel="prefetch" href="/dist/assets/js/40.101786c9.js"><link rel="prefetch" href="/dist/assets/js/41.06c4fbf1.js"><link rel="prefetch" href="/dist/assets/js/42.3d965f20.js"><link rel="prefetch" href="/dist/assets/js/43.18da7f89.js"><link rel="prefetch" href="/dist/assets/js/44.c6bdf55a.js"><link rel="prefetch" href="/dist/assets/js/45.03acaf36.js"><link rel="prefetch" href="/dist/assets/js/46.7e7737f9.js"><link rel="prefetch" href="/dist/assets/js/47.fbffa5fb.js"><link rel="prefetch" href="/dist/assets/js/48.93de5a00.js"><link rel="prefetch" href="/dist/assets/js/49.e95dbbe8.js"><link rel="prefetch" href="/dist/assets/js/5.8a3f6bf2.js"><link rel="prefetch" href="/dist/assets/js/50.fe2f95ef.js"><link rel="prefetch" href="/dist/assets/js/51.2ef85e59.js"><link rel="prefetch" href="/dist/assets/js/52.dd9dce87.js"><link rel="prefetch" href="/dist/assets/js/6.37d98e63.js"><link rel="prefetch" href="/dist/assets/js/7.6efc3c96.js"><link rel="prefetch" href="/dist/assets/js/8.c085ae35.js"><link rel="prefetch" href="/dist/assets/js/9.fde35886.js">
    <link rel="stylesheet" href="/dist/assets/css/0.styles.1d7c383d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>ğŸŒ</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc></p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>sun</span>
          Â Â 
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dist/" class="home-link router-link-active"><img src="/dist/logo.png" alt="ğŸŒ" class="logo"> <span class="site-name">ğŸŒ</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dist/" class="nav-link"><i class="iconfont reco-home"></i>
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/categories/javascript/" class="nav-link"><i class="undefined"></i>
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/å‰ç«¯/" class="nav-link"><i class="undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/linux/" class="nav-link"><i class="undefined"></i>
  linux
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/liunx/" class="nav-link"><i class="undefined"></i>
  liunx
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/nginx/" class="nav-link"><i class="undefined"></i>
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/macos/" class="nav-link"><i class="undefined"></i>
  macos
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/mysql/" class="nav-link"><i class="undefined"></i>
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/nodejs/" class="nav-link"><i class="undefined"></i>
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/windows/" class="nav-link"><i class="undefined"></i>
  windows
</a></li></ul></div></div><div class="nav-item"><a href="/dist/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  æ ‡ç­¾
</a></div><div class="nav-item"><a href="/dist/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´çº¿
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="https://19-blog.oss-cn-shenzhen.aliyuncs.com/baracktocat.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    sun
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>42</h3> <h6 data-v-828910c6>æ–‡ç« </h6></div> <div data-v-828910c6><h3 data-v-828910c6>28</h3> <h6 data-v-828910c6>æ ‡ç­¾</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/dist/" class="nav-link"><i class="iconfont reco-home"></i>
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/categories/javascript/" class="nav-link"><i class="undefined"></i>
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/å‰ç«¯/" class="nav-link"><i class="undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/linux/" class="nav-link"><i class="undefined"></i>
  linux
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/liunx/" class="nav-link"><i class="undefined"></i>
  liunx
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/nginx/" class="nav-link"><i class="undefined"></i>
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/macos/" class="nav-link"><i class="undefined"></i>
  macos
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/mysql/" class="nav-link"><i class="undefined"></i>
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/nodejs/" class="nav-link"><i class="undefined"></i>
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/dist/categories/windows/" class="nav-link"><i class="undefined"></i>
  windows
</a></li></ul></div></div><div class="nav-item"><a href="/dist/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  æ ‡ç­¾
</a></div><div class="nav-item"><a href="/dist/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´çº¿
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>dockerå­¦ä¹ æ€»ç»“</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>sun</span>
          Â Â 
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">dockerå­¦ä¹ æ€»ç»“</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>sun</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>2021-7-18</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>docker</span><span class="tag-item" data-v-1ff7123e>centos</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="dockerå­¦ä¹ æ€»ç»“"><a href="#dockerå­¦ä¹ æ€»ç»“" class="header-anchor">#</a> dockerå­¦ä¹ æ€»ç»“</h1> <h2 id="_1-centos7å®‰è£…docker"><a href="#_1-centos7å®‰è£…docker" class="header-anchor">#</a> 1.centos7å®‰è£…docker</h2> <h3 id="å¸è½½æ—§ç‰ˆæœ¬"><a href="#å¸è½½æ—§ç‰ˆæœ¬" class="header-anchor">#</a> å¸è½½æ—§ç‰ˆæœ¬</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> yum remove docker <span class="token punctuation">\</span>
                  docker-client <span class="token punctuation">\</span>
                  docker-client-latest <span class="token punctuation">\</span>
                  docker-common <span class="token punctuation">\</span>
                  docker-latest <span class="token punctuation">\</span>
                  docker-latest-logrotate <span class="token punctuation">\</span>
                  docker-logrotate <span class="token punctuation">\</span>
                  docker-engine
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="header-anchor">#</a> å®‰è£…ä¾èµ–</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> -y yum-utils
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="æ·»åŠ é˜¿é‡Œäº‘é•œåƒ"><a href="#æ·»åŠ é˜¿é‡Œäº‘é•œåƒ" class="header-anchor">#</a> æ·»åŠ é˜¿é‡Œäº‘é•œåƒ</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="å®‰è£…"><a href="#å®‰è£…" class="header-anchor">#</a> å®‰è£…</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="header-anchor">#</a> å¯åŠ¨</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl start docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="è®¾ç½®å¼€æœºè‡ªå¯"><a href="#è®¾ç½®å¼€æœºè‡ªå¯" class="header-anchor">#</a> è®¾ç½®å¼€æœºè‡ªå¯</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl <span class="token builtin class-name">enable</span> docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_2-å®¹å™¨çš„ä½¿ç”¨"><a href="#_2-å®¹å™¨çš„ä½¿ç”¨" class="header-anchor">#</a> 2.å®¹å™¨çš„ä½¿ç”¨</h2> <p>å®¹å™¨éƒ½æ˜¯åŸºäºé•œåƒï¼Œæ‰€ä»¥è¦é€šè¿‡ä¸€ä¸ªé•œåƒæ¥å¯åŠ¨å®¹å™¨</p> <h4 id="_1-è·å–é•œåƒ"><a href="#_1-è·å–é•œåƒ" class="header-anchor">#</a> 1.è·å–é•œåƒ</h4> <p>å¦‚æœæˆ‘ä»¬æœ¬åœ°æ²¡æœ‰ centos é•œåƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ docker pull å‘½ä»¤æ¥è½½å…¥ centos é•œåƒ</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ docker pull centos 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2-å¯åŠ¨å®¹å™¨"><a href="#_2-å¯åŠ¨å®¹å™¨" class="header-anchor">#</a> 2.å¯åŠ¨å®¹å™¨</h4> <p>ä»¥ä¸‹å‘½ä»¤ä½¿ç”¨ centos é•œåƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œå‚æ•°ä¸ºä»¥å‘½ä»¤è¡Œæ¨¡å¼è¿›å…¥è¯¥å®¹å™¨</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ docker run -it centos  /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å‚æ•°è¯´æ˜ï¼š</p> <ul><li><strong>-it</strong>: è¿›å…¥å®¹å™¨å¼€å¯ä¸€ä¸ªç»ˆç«¯ã€‚</li> <li><strong>-d</strong>: åå°è¿è¡Œã€‚</li> <li>**centos **:  é•œåƒã€‚</li> <li><strong>/bin/bash</strong>ï¼šæ”¾åœ¨é•œåƒååçš„æ˜¯å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ªäº¤äº’å¼ Shellï¼Œå› æ­¤ç”¨çš„æ˜¯ /bin/bashã€‚</li></ul> <h2 id="_3-æ•°æ®å·"><a href="#_3-æ•°æ®å·" class="header-anchor">#</a> 3.æ•°æ®å·</h2> <p>é€šè¿‡æŒ‚è½½æ•°æ®å·ï¼Œé¿å…å®¹å™¨åœæ­¢æ•°æ®è¢«é”€æ¯</p> <p>-v æºè·¯å¾„ï¼šç›®æ ‡è·¯å¾„</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>docker run  -d -P  -v /home/conf.d:/etc/nginx/conf.d --name nginx-02  nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="mysqlåŒæ­¥æ•°æ®"><a href="#mysqlåŒæ­¥æ•°æ®" class="header-anchor">#</a> mysqlåŒæ­¥æ•°æ®</h3> <p>é€šè¿‡mysqlé•œåƒå®ç°æŒ‚è½½æ•°æ®å·ï¼Œå¯ä»¥åŒæ­¥æ•°æ®</p> <p>-d åå°è¿è¡Œ</p> <p>-p ç«¯å£æ˜ å°„</p> <p>-v  å·æŒ‚è½½</p> <p>-e ç¯å¢ƒé…ç½®</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker run -d -p <span class="token number">3310</span>:3306 -v /home/mysql1/conf:/etc/mysql/conf.d -v /home/mysql1/data:/var/lib/mysql -e
<span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> --name mysql01 mysql:5.7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å½“æºè·¯å¾„ä¸ºç©ºæ—¶ï¼Œç›®æ ‡è·¯å¾„çš„æ–‡ä»¶è¦†ç›–æºè·¯å¾„</p> <p>å½“æºè·¯å¾„ä¸ä¸ºç©ºæ—¶ï¼Œæºè·¯å¾„æ–‡ä»¶è¦†ç›–ç›®æ ‡è·¯å¾„</p> <h3 id="åŒ¿åå’Œå…·åæŒ‚è½½"><a href="#åŒ¿åå’Œå…·åæŒ‚è½½" class="header-anchor">#</a> åŒ¿åå’Œå…·åæŒ‚è½½</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># åŒ¿åæŒ‚è½½ åªå†™äº†å®¹å™¨å†…çš„è·¯å¾„ï¼Œæ²¡æœ‰å†™å®¹å™¨å¤–çš„è·¯å¾„</span>
docker run -d -P --name nginx01 -v /etc/nginx nginx
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker volume ls</span>
DRIVER    VOLUME NAME
<span class="token builtin class-name">local</span>     ebec36c5a058eafff723bdc74c0634b338653cf590dd78bdcb1a21ba86c0af3a
<span class="token comment"># å…·åæŒ‚è½½ -v å·åç§°ï¼šå®¹å™¨å†…è·¯å¾„ æŒ‡å®šæŒ‚è½½å·çš„åç§° </span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker run -d -P --name nginx02 -v jm-nginx:/etc/nginx nginx</span>
8bfdd07cddc1bcf5dfae86b96bb41c549aa77ca4dbdcbb190deae0562bbfd33b
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker volume ls</span>
DRIVER    VOLUME NAME
<span class="token builtin class-name">local</span>     ebec36c5a058eafff723bdc74c0634b338653cf590dd78bdcb1a21ba86c0af3a
<span class="token builtin class-name">local</span>     jm-nginx 

<span class="token comment"># é€šè¿‡  docker volume  inspect  å¯ä»¥æŸ¥çœ‹è¯¦æƒ…ä¿¡æ¯</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker volume  inspect jm-nginx</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;CreatedAt&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2021-06-09T10:40:43+08:00&quot;</span>,
        <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>,
        <span class="token string">&quot;Labels&quot;</span><span class="token builtin class-name">:</span> null,
        <span class="token string">&quot;Mountpoint&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/volumes/jm-nginx/_data&quot;</span>,
        <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;jm-nginx&quot;</span>,
        <span class="token string">&quot;Options&quot;</span><span class="token builtin class-name">:</span> null,
        <span class="token string">&quot;Scope&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># é€šè¿‡ -v å®¹å™¨å†…è·¯å¾„ï¼šro rw æ”¹å†™è¯»å†™æƒé™</span>
ro <span class="token builtin class-name">readonly</span> <span class="token comment">#åªè¯»</span>
rw readwrite <span class="token comment">#å¯è¯»å¯å†™</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker run -d -P --name nginx02 -v jm-nginx:/etc/nginx:ro nginx</span>
<span class="token comment"># ro è¯´æ˜è¿™ä¸ªè·¯å¾„åªèƒ½åœ¨å®¿ä¸»æœºæ“ä½œï¼Œä¸èƒ½åœ¨å®¹å™¨å†…æ“ä½œ</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="æ•°æ®å·å®¹å™¨"><a href="#æ•°æ®å·å®¹å™¨" class="header-anchor">#</a> æ•°æ®å·å®¹å™¨</h3> <p>é€šè¿‡ --volumes-from å®ç°æ•°æ®å·å…±äº«</p> <h2 id="_4-dockerfile"><a href="#_4-dockerfile" class="header-anchor">#</a> 4.Dockerfile</h2> <p><strong>ä»€ä¹ˆæ˜¯ Dockerfileï¼Ÿ</strong></p> <p>Dockerfile æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚</p> <ul><li><p><strong>FROM</strong>ï¼šå®šåˆ¶çš„é•œåƒéƒ½æ˜¯åŸºäº FROM çš„é•œåƒ</p></li> <li><p><strong>RUN</strong>ï¼šæ‰§è¡Œçš„å‘½ä»¤è¡Œå‘½ä»¤</p></li> <li><p><strong>COPY</strong>ï¼š å¤åˆ¶æŒ‡ä»¤ï¼Œä»ä¸Šä¸‹æ–‡ç›®å½•ä¸­å¤åˆ¶æ–‡ä»¶æˆ–è€…ç›®å½•åˆ°å®¹å™¨é‡ŒæŒ‡å®šè·¯å¾„</p></li> <li><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>COPY æºè·¯å¾„ ç›®æ ‡è·¯å¾„
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><strong>EXPOSE</strong>ï¼š æš´éœ²ç«¯å£</p></li> <li><p><strong>CMD</strong> ï¼šç±»ä¼¼äº RUN æŒ‡ä»¤ï¼Œç”¨äºè¿è¡Œç¨‹åºï¼Œä½†äºŒè€…è¿è¡Œçš„æ—¶é—´ç‚¹ä¸åŒï¼ŒCMD åœ¨docker run æ—¶è¿è¡Œï¼ŒRUN æ˜¯åœ¨ docker build</p></li> <li><p><strong>ENV</strong> ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå®šä¹‰äº†ç¯å¢ƒå˜é‡ï¼Œé‚£ä¹ˆåœ¨åç»­çš„æŒ‡ä»¤ä¸­ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªç¯å¢ƒå˜é‡ã€‚</p></li> <li><p><strong>WORKDIR</strong> ï¼šæŒ‡å®šå·¥ä½œç›®å½•ã€‚</p></li> <li><p><strong>VOLUME</strong> ï¼šå®šä¹‰åŒ¿åæ•°æ®å·ã€‚åœ¨å¯åŠ¨å®¹å™¨æ—¶å¿˜è®°æŒ‚è½½æ•°æ®å·ï¼Œä¼šè‡ªåŠ¨æŒ‚è½½åˆ°åŒ¿åå·ï¼ŒåŒæ­¥æ•°æ®ï¼Œé¿å…é‡è¦çš„æ•°æ®ï¼Œå› å®¹å™¨é‡å¯è€Œä¸¢å¤±ï¼Œè¿™æ˜¯éå¸¸è‡´å‘½çš„ã€‚</p></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># FROMï¼šåŸºäº centos7.8.2003 çš„é•œåƒ</span>
FROM centos:centos7.8.2003
RUN <span class="token builtin class-name">echo</span> <span class="token string">'å¼€å§‹æ„å»ºä¸€ä¸ªcentos7.8ï¼Œå¹¶å®‰è£…mysqlã€nginxã€redis'</span>
<span class="token comment">#å¼€å§‹æ„å»ºä¸€ä¸ªcentos7.8ï¼Œå¹¶å®‰è£…mysqlã€nginxã€redis</span>
RUN <span class="token builtin class-name">echo</span> <span class="token string">'æ›´æ–°åŠå®‰è£…ç›¸å…³å·¥å…·'</span>
<span class="token comment">#å®‰è£…ä¾èµ–åº“</span>
RUN yum <span class="token function">install</span> -y <span class="token function">wget</span> <span class="token function">lsof</span> telnet net-tools gcc gcc-c++ <span class="token function">make</span> pcre pcre-devel zlib zlib-devel

<span class="token comment"># å®‰è£…nginx</span>
RUN <span class="token builtin class-name">echo</span> <span class="token string">'å¼€å§‹å®‰è£…nginx'</span>
RUN <span class="token function">wget</span> https://nginx.org/download/nginx-1.18.0.tar.gz
RUN <span class="token function">tar</span> -zxvf nginx-1.18.0.tar.gz  <span class="token comment">#è§£å‹</span>
<span class="token comment"># ç¼–è¯‘å®‰è£…</span>
RUN <span class="token builtin class-name">cd</span> nginx-1.18.0 <span class="token operator">&amp;&amp;</span> ./configure  <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
EXPOSE <span class="token number">80</span>
CMD <span class="token punctuation">[</span><span class="token string">&quot;/usr/local/nginx/sbin/nginx&quot;</span>,<span class="token string">&quot;-g&quot;</span>,<span class="token string">&quot;daemon off;&quot;</span><span class="token punctuation">]</span>

<span class="token comment"># å®‰è£…redis</span>
RUN <span class="token builtin class-name">echo</span> <span class="token string">'å¼€å§‹å®‰è£…redis'</span>
RUN yum -y <span class="token function">install</span> gcc automake autoconf libtool
RUN <span class="token builtin class-name">cd</span> / 
RUN <span class="token function">wget</span> http://download.redis.io/releases/redis-5.0.0.tar.gz
RUN <span class="token function">tar</span> -zxvf redis-5.0.0.tar.gz
RUN <span class="token builtin class-name">cd</span> redis-5.0.0 <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
EXPOSE <span class="token number">6379</span>
CMD <span class="token punctuation">[</span><span class="token string">&quot;/redis-5.0.0/src/redis-server&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>docker build -t nginx:centos <span class="token builtin class-name">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_5-è‡ªå®šä¹‰ç½‘ç»œ"><a href="#_5-è‡ªå®šä¹‰ç½‘ç»œ" class="header-anchor">#</a> 5.è‡ªå®šä¹‰ç½‘ç»œ</h2> <p>æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œï¼Œå¦‚ä¸‹ï¼š</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker network ls </span>
NETWORK ID     NAME      DRIVER    SCOPE
a96a7e4968ca   bridge    bridge    <span class="token builtin class-name">local</span>
893312e161d7   <span class="token function">host</span>      <span class="token function">host</span>      <span class="token builtin class-name">local</span>
4be7d99d5248   none      null      <span class="token builtin class-name">local</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="ç½‘ç»œæ¨¡å¼"><a href="#ç½‘ç»œæ¨¡å¼" class="header-anchor">#</a> ç½‘ç»œæ¨¡å¼</h3> <ul><li>bridge : æ¡¥æ¥ dockerï¼ˆé»˜è®¤ï¼Œè‡ªå·±åˆ›å»ºä¹Ÿä½¿ç”¨bridgeæ¨¡å¼ï¼‰</li> <li>noneï¼šä¸é…ç½®ç½‘ç»œ</li> <li>hostï¼šå’Œå®¹å™¨æœºå…±äº«ç½‘è·¯</li> <li>contaninerï¼šå®¹å™¨ç½‘è·¯è¿é€šï¼ˆç”¨çš„å°‘ï¼å±€é™å¾ˆå¤§ï¼‰</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#æˆ‘ä»¬ç›´æ¥å¯åŠ¨å‘½ä»¤ï¼Œæœ‰é»˜è®¤çš„å‚æ•°ï¼Œåªæ˜¯çœç•¥æ‰äº† --net bridge,è€Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„docker0</span>
docker run -d -P --name nginx01 --net bridge nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="åˆ›å»º"><a href="#åˆ›å»º" class="header-anchor">#</a> åˆ›å»º</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>docker network create --driver bridge --subnet <span class="token number">192.168</span>.1.0/16 --gateway <span class="token number">192.168</span>.1.0 mynet
è§£æï¼š
--driver bridge è¡¨ç¤ºä½¿ç”¨æ¡¥æ¥æ¨¡å¼
--subnet <span class="token number">192.168</span>.1.0/16 è¡¨ç¤ºå­ç½‘ip å¯ä»¥åˆ†é… <span class="token number">192.168</span>.1.2 åˆ° <span class="token number">192.168</span>.255.255
--gateway <span class="token number">192.168</span>.1.0 è¡¨ç¤ºç½‘å…³
mynet è¡¨ç¤ºç½‘ç»œå
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="ç½‘ç»œè¿é€š"><a href="#ç½‘ç»œè¿é€š" class="header-anchor">#</a> ç½‘ç»œè¿é€š</h3> <p>ä½¿ç”¨ docker network connect è¿é€šä¸åŒç½‘æ®µçš„å®¹å™¨</p> <p><img src="https://19-blog.oss-cn-shenzhen.aliyuncs.com/20210609140505.png" alt=""></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># docker network connect è‡ªå®šä¹‰ç½‘ç»œå å®¹å™¨å</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker network connect mynet tomcat-test</span>
<span class="token comment"># è¿é€šä¹‹åå°±æ˜¯æŠŠtomcat-testæ”¾åˆ°mynetä¸‹</span>
<span class="token comment"># ä¸€ä¸ªå®¹å™¨ä¸¤ä¸ªIPåœ°å€</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="https://19-blog.oss-cn-shenzhen.aliyuncs.com/20210609140750.png" alt=""></p> <h2 id="_6-è‡ªå®šä¹‰centos"><a href="#_6-è‡ªå®šä¹‰centos" class="header-anchor">#</a> 6.è‡ªå®šä¹‰centos</h2> <p>é€šè¿‡Dockerfileæ„å»ºé•œåƒï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># FROMï¼šåŸºäº centos7.8.2003 çš„é•œåƒ</span>
FROM centos:centos7.8.2003
RUN <span class="token builtin class-name">echo</span> <span class="token string">'å¼€å§‹æ„å»ºä¸€ä¸ªcentos7.8ï¼Œå¹¶å®‰è£…mysqlã€nginxã€redis'</span>
<span class="token comment">#å¼€å§‹æ„å»ºä¸€ä¸ªcentos7.8ï¼Œå¹¶å®‰è£…mysqlã€nginxã€redis</span>
RUN <span class="token builtin class-name">echo</span> <span class="token string">'æ›´æ–°åŠå®‰è£…ç›¸å…³å·¥å…·'</span>

<span class="token comment">#å®‰è£…ä¾èµ–åº“</span>
RUN yum <span class="token function">install</span> -y <span class="token function">wget</span> <span class="token function">lsof</span> telnet net-tools gcc gcc-c++ <span class="token function">make</span> pcre pcre-devel zlib zlib-devel

<span class="token comment"># å®‰è£…mysql</span>
RUN <span class="token function">wget</span> https://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm
RUN <span class="token function">rpm</span> -ivh mysql57-community-release-el7-9.noarch.rpm
RUN yum -y <span class="token function">install</span> mysql-server
CMD <span class="token punctuation">[</span><span class="token string">&quot;systemctl&quot;</span>,<span class="token string">&quot;start&quot;</span>,<span class="token string">&quot;mysqld&quot;</span><span class="token punctuation">]</span>

<span class="token comment"># å®‰è£…nginx</span>
RUN <span class="token builtin class-name">echo</span> <span class="token string">'å¼€å§‹å®‰è£…nginx'</span>
RUN <span class="token function">wget</span> https://nginx.org/download/nginx-1.18.0.tar.gz
RUN <span class="token function">tar</span> -zxvf nginx-1.18.0.tar.gz  <span class="token comment">#è§£å‹</span>

<span class="token comment"># ç¼–è¯‘å®‰è£…</span>
RUN <span class="token builtin class-name">cd</span> nginx-1.18.0 <span class="token operator">&amp;&amp;</span> ./configure  <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
EXPOSE <span class="token number">80</span>
CMD <span class="token punctuation">[</span><span class="token string">&quot;/usr/local/nginx/sbin/nginx&quot;</span>,<span class="token string">&quot;-g&quot;</span>,<span class="token string">&quot;daemon off;&quot;</span><span class="token punctuation">]</span>

<span class="token comment"># å®‰è£…redis</span>
RUN <span class="token builtin class-name">echo</span> <span class="token string">'å¼€å§‹å®‰è£…redis'</span>
RUN yum -y <span class="token function">install</span> gcc automake autoconf libtool
RUN <span class="token builtin class-name">cd</span> / 
RUN <span class="token function">wget</span> http://download.redis.io/releases/redis-5.0.0.tar.gz
RUN <span class="token function">tar</span> -zxvf redis-5.0.0.tar.gz
RUN <span class="token builtin class-name">cd</span> redis-5.0.0 <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
EXPOSE <span class="token number">6379</span>
CMD <span class="token punctuation">[</span><span class="token string">&quot;/redis-5.0.0/src/redis-server&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="æŠ¥é”™"><a href="#æŠ¥é”™" class="header-anchor">#</a> æŠ¥é”™</h3> <h3 id="sshç™»å½•"><a href="#sshç™»å½•" class="header-anchor">#</a> sshç™»å½•</h3> <h4 id="éœ€è¦å®‰è£…ä¾èµ–"><a href="#éœ€è¦å®‰è£…ä¾èµ–" class="header-anchor">#</a> éœ€è¦å®‰è£…ä¾èµ–</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>yum <span class="token function">install</span> -y openssh-server
<span class="token comment">#æŸ¥çœ‹æ˜¯å¦å¯åŠ¨22ç«¯å£ </span>
    <span class="token function">netstat</span> -antp <span class="token operator">|</span> <span class="token function">grep</span> sshd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="ä¿®æ”¹sshd-config-ä¸ºå¯†ç ç™»å½•"><a href="#ä¿®æ”¹sshd-config-ä¸ºå¯†ç ç™»å½•" class="header-anchor">#</a> ä¿®æ”¹sshd_config ä¸ºå¯†ç ç™»å½•</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">vi</span> /etc/ssh/sshd_config
<span class="token comment">#æ‰“å¼€æ³¨é‡Š PermitRootLogin yes, å…è®¸å¯†ç ç™»å½•,ä¿å­˜é€€å‡º</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="è®¾ç½®rootå¯†ç "><a href="#è®¾ç½®rootå¯†ç " class="header-anchor">#</a> è®¾ç½®rootå¯†ç </h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>root@201f4fa9f59f /<span class="token punctuation">]</span><span class="token comment"># passwd root</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Failed to get D-Bus connection: Operation not permitted</p> <p>Dockerçš„è®¾è®¡ç†å¿µæ˜¯åœ¨å®¹å™¨é‡Œé¢ä¸è¿è¡Œåå°æœåŠ¡ï¼Œå®¹å™¨æœ¬èº«å°±æ˜¯å®¿ä¸»æœºä¸Šçš„ä¸€ä¸ªç‹¬ç«‹çš„ä¸»è¿›ç¨‹ï¼Œä¹Ÿå¯ä»¥é—´æ¥çš„ç†è§£ä¸ºå°±æ˜¯å®¹å™¨é‡Œè¿è¡ŒæœåŠ¡çš„åº”ç”¨è¿›ç¨‹ã€‚ä¸€ä¸ªå®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯å›´ç»•è¿™ä¸ªä¸»è¿›ç¨‹å­˜åœ¨çš„ï¼Œæ‰€ä»¥æ­£ç¡®çš„ä½¿ç”¨å®¹å™¨æ–¹æ³•æ˜¯å°†é‡Œé¢çš„æœåŠ¡è¿è¡Œåœ¨å‰å°ã€‚</p> <p><strong>ç‰¹æƒæ¨¡å¼è¿è¡Œå®¹å™¨</strong></p> <p><code>--privileged=true</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>docker run -d --name centos01 --privileged<span class="token operator">=</span>true centos-close-3 /usr/sbin/init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker run -d -P --name docker-1 -v /home/docker1/etc/ssh:/etc/ssh --privileged<span class="token operator">=</span>true docker-test /bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_7-docker-compose"><a href="#_7-docker-compose" class="header-anchor">#</a> 7. docker-compose</h2> <p>Compose æ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡ Composeï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ YML æ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰æœåŠ¡ã€‚ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ä» YML æ–‡ä»¶é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚</p> <h3 id="é•œåƒå®‰è£…"><a href="#é•œåƒå®‰è£…" class="header-anchor">#</a> é•œåƒå®‰è£…</h3> <p>ä½¿ç”¨githubä¸‹è½½å®‰è£…å¤ªæ…¢ï¼Œæ¨èä½¿ç”¨é•œåƒå®‰è£…ï¼Œå¦‚ä¸‹ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> -L https://get.daocloud.io/docker/compose/releases/download/1.24.0/docker-compose-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -s<span class="token variable">`</span></span>-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -m<span class="token variable">`</span></span> <span class="token operator">&gt;</span> /usr/local/bin/docker-compose
<span class="token comment"># è®¾ç½®å¯è¿è¡Œ</span>
<span class="token function">chmod</span> +x /usr/local/bin/docker-compose
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="ç‰ˆæœ¬æ£€æŸ¥"><a href="#ç‰ˆæœ¬æ£€æŸ¥" class="header-anchor">#</a> ç‰ˆæœ¬æ£€æŸ¥</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker-compose --version
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="åˆ›å»º-2"><a href="#åˆ›å»º-2" class="header-anchor">#</a> åˆ›å»º</h3> <p>åˆ›å»ºé»˜è®¤é…ç½®æ–‡ä»¶ docker-compose.ymlï¼Œå¯é€šè¿‡<code>docker-compose up -d</code>è¿è¡Œï¼Œç¤ºä¾‹å¦‚ä¸‹</p> <h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="header-anchor">#</a> ç¤ºä¾‹</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">#yaml é…ç½®</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3'</span> <span class="token comment"># è¡¨ç¤ºè¯¥ Docker-Compose æ–‡ä»¶ä½¿ç”¨çš„æ˜¯ Version 2 file</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">nginx</span><span class="token punctuation">:</span> <span class="token comment">#æŒ‡å®šæœåŠ¡åç§°</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> nginx  <span class="token comment">#å®¹å™¨çš„åç§°</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always  <span class="token comment">#å¼€æœºè¿è¡Œ</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx  <span class="token comment">#é•œåƒæ–‡ä»¶</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span> <span class="token comment">#æŒ‡å®šç«¯å£æ˜ å°„</span>
     <span class="token punctuation">-</span> <span class="token string">'80:80'</span>
     <span class="token punctuation">-</span> <span class="token string">'1000:1000'</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span> <span class="token comment"># æ•°æ®å·</span>
      <span class="token punctuation">-</span> /home/nginx/html<span class="token punctuation">:</span>/usr/share/nginx/html
      <span class="token punctuation">-</span> /home/nginx/conf<span class="token punctuation">:</span>/etc/nginx/conf.d
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="å¸¸è§å‘½ä»¤å¦‚ä¸‹"><a href="#å¸¸è§å‘½ä»¤å¦‚ä¸‹" class="header-anchor">#</a> å¸¸è§å‘½ä»¤å¦‚ä¸‹ï¼š</h3> <ul><li><p>**ps: **åˆ—å‡ºæ‰€æœ‰è¿è¡Œå®¹å™¨</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker-compose  <span class="token function">ps</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><strong>up</strong>ï¼šæ„å»ºã€å¯åŠ¨å®¹å™¨</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker-compose  up 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><strong>-d</strong>ï¼šåå°è¿è¡Œ</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker-compose  up -d
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><strong>logs</strong>ï¼šæŸ¥çœ‹æœåŠ¡æ—¥å¿—è¾“å‡º</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker-compose   logs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><strong>build</strong>ï¼šæ„å»ºæˆ–è€…é‡æ–°æ„å»ºæœåŠ¡</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker-compose  build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2021-7-19 12:43:03 â”œF10: AMâ”¤</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#_1-centos7å®‰è£…docker" class="sidebar-link reco-side-_1-centos7å®‰è£…docker" data-v-70334359>1.centos7å®‰è£…docker</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#å¸è½½æ—§ç‰ˆæœ¬" class="sidebar-link reco-side-å¸è½½æ—§ç‰ˆæœ¬" data-v-70334359>å¸è½½æ—§ç‰ˆæœ¬</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#å®‰è£…ä¾èµ–" class="sidebar-link reco-side-å®‰è£…ä¾èµ–" data-v-70334359>å®‰è£…ä¾èµ–</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#æ·»åŠ é˜¿é‡Œäº‘é•œåƒ" class="sidebar-link reco-side-æ·»åŠ é˜¿é‡Œäº‘é•œåƒ" data-v-70334359>æ·»åŠ é˜¿é‡Œäº‘é•œåƒ</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#å®‰è£…" class="sidebar-link reco-side-å®‰è£…" data-v-70334359>å®‰è£…</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#å¯åŠ¨" class="sidebar-link reco-side-å¯åŠ¨" data-v-70334359>å¯åŠ¨</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#è®¾ç½®å¼€æœºè‡ªå¯" class="sidebar-link reco-side-è®¾ç½®å¼€æœºè‡ªå¯" data-v-70334359>è®¾ç½®å¼€æœºè‡ªå¯</a></li><li class="level-2" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#_2-å®¹å™¨çš„ä½¿ç”¨" class="sidebar-link reco-side-_2-å®¹å™¨çš„ä½¿ç”¨" data-v-70334359>2.å®¹å™¨çš„ä½¿ç”¨</a></li><li class="level-2" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#_3-æ•°æ®å·" class="sidebar-link reco-side-_3-æ•°æ®å·" data-v-70334359>3.æ•°æ®å·</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#mysqlåŒæ­¥æ•°æ®" class="sidebar-link reco-side-mysqlåŒæ­¥æ•°æ®" data-v-70334359>mysqlåŒæ­¥æ•°æ®</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#åŒ¿åå’Œå…·åæŒ‚è½½" class="sidebar-link reco-side-åŒ¿åå’Œå…·åæŒ‚è½½" data-v-70334359>åŒ¿åå’Œå…·åæŒ‚è½½</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#æ•°æ®å·å®¹å™¨" class="sidebar-link reco-side-æ•°æ®å·å®¹å™¨" data-v-70334359>æ•°æ®å·å®¹å™¨</a></li><li class="level-2" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#_4-dockerfile" class="sidebar-link reco-side-_4-dockerfile" data-v-70334359>4.Dockerfile</a></li><li class="level-2" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#_5-è‡ªå®šä¹‰ç½‘ç»œ" class="sidebar-link reco-side-_5-è‡ªå®šä¹‰ç½‘ç»œ" data-v-70334359>5.è‡ªå®šä¹‰ç½‘ç»œ</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#ç½‘ç»œæ¨¡å¼" class="sidebar-link reco-side-ç½‘ç»œæ¨¡å¼" data-v-70334359>ç½‘ç»œæ¨¡å¼</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#åˆ›å»º" class="sidebar-link reco-side-åˆ›å»º" data-v-70334359>åˆ›å»º</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#ç½‘ç»œè¿é€š" class="sidebar-link reco-side-ç½‘ç»œè¿é€š" data-v-70334359>ç½‘ç»œè¿é€š</a></li><li class="level-2" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#_6-è‡ªå®šä¹‰centos" class="sidebar-link reco-side-_6-è‡ªå®šä¹‰centos" data-v-70334359>6.è‡ªå®šä¹‰centos</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#æŠ¥é”™" class="sidebar-link reco-side-æŠ¥é”™" data-v-70334359>æŠ¥é”™</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#sshç™»å½•" class="sidebar-link reco-side-sshç™»å½•" data-v-70334359>sshç™»å½•</a></li><li class="level-2" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#_7-docker-compose" class="sidebar-link reco-side-_7-docker-compose" data-v-70334359>7. docker-compose</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#é•œåƒå®‰è£…" class="sidebar-link reco-side-é•œåƒå®‰è£…" data-v-70334359>é•œåƒå®‰è£…</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#ç‰ˆæœ¬æ£€æŸ¥" class="sidebar-link reco-side-ç‰ˆæœ¬æ£€æŸ¥" data-v-70334359>ç‰ˆæœ¬æ£€æŸ¥</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#åˆ›å»º-2" class="sidebar-link reco-side-åˆ›å»º-2" data-v-70334359>åˆ›å»º</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#ç¤ºä¾‹" class="sidebar-link reco-side-ç¤ºä¾‹" data-v-70334359>ç¤ºä¾‹</a></li><li class="level-3" data-v-70334359><a href="/dist/blogs/docker/xue-xi-zong-jie.html#å¸¸è§å‘½ä»¤å¦‚ä¸‹" class="sidebar-link reco-side-å¸¸è§å‘½ä»¤å¦‚ä¸‹" data-v-70334359>å¸¸è§å‘½ä»¤å¦‚ä¸‹ï¼š</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/dist/assets/js/app.708579bc.js" defer></script><script src="/dist/assets/js/3.ed567165.js" defer></script><script src="/dist/assets/js/1.c97762f2.js" defer></script><script src="/dist/assets/js/11.e7f32a7d.js" defer></script>
  </body>
</html>
